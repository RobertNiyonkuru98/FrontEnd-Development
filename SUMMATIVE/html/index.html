<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Student Finance Tracker - Smart budgeting for students"
    />
    <title>Finance Tracker | Smart Budgeting</title>
    <link rel="stylesheet" href="../css/main.css" />
  </head>
  <body>
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header with Navigation -->
    <header role="banner">
      <nav role="navigation" aria-label="Main navigation">
        <div class="nav-container">
          <div class="nav-brand">
            <h1 class="logo">üí∞ FinanceTracker</h1>
            <button
              class="nav-toggle"
              aria-label="Toggle navigation menu"
              aria-expanded="false"
            >
              <span class="hamburger"></span>
              <span class="hamburger"></span>
              <span class="hamburger"></span>
            </button>
          </div>
          <ul class="nav-menu" role="menubar">
            <li role="none">
              <a href="#home" role="menuitem" class="nav-link active">Home</a>
            </li>
            <li role="none">
              <a href="#dashboard" role="menuitem" class="nav-link"
                >Dashboard</a
              >
            </li>
            <li role="none">
              <a href="#transactions" role="menuitem" class="nav-link"
                >Transactions</a
              >
            </li>
            <li role="none">
              <a href="#balance" role="menuitem" class="nav-link">Balance</a>
            </li>
            <li role="none">
              <a href="#history" role="menuitem" class="nav-link">History</a>
            </li>
            <li role="none">
              <a href="#settings" role="menuitem" class="nav-link">Settings</a>
            </li>
            <li role="none">
              <a href="#about" role="menuitem" class="nav-link">About</a>
            </li>
          </ul>
        </div>
      </nav>
    </header>

    <!-- Main Content -->
    <main id="main-content" role="main">
      <!-- HOME / LANDING SECTION -->
      <section id="home" class="section active" aria-labelledby="home-heading">
        <div class="container">
          <div class="hero">
            <h2 id="home-heading">Welcome to FinanceTracker</h2>
            <p class="hero-subtitle">
              Smart budgeting made simple for students
            </p>
          </div>

          <div class="quick-stats">
            <div class="stat-card">
              <span class="stat-value" id="home-total-transactions">0</span>
              <span class="stat-label">Transactions</span>
            </div>
            <div class="stat-card">
              <span class="stat-value" id="home-total-spent">RWF 0</span>
              <span class="stat-label">Total Spent</span>
            </div>
          </div>

          <div class="cta-buttons">
            <button class="btn btn-primary" data-navigate="dashboard">
              üìä View Dashboard
            </button>
            <button class="btn btn-secondary" data-navigate="transactions">
              ‚ûï Add Transaction
            </button>
          </div>
        </div>
      </section>

      <!-- DASHBOARD SECTION -->
      <section
        id="dashboard"
        class="section"
        aria-labelledby="dashboard-heading"
      >
        <div class="container">
          <h2 id="dashboard-heading">Dashboard</h2>

          <!-- Key Metrics -->
          <div class="metrics-grid">
            <div class="metric-card">
              <h3 class="metric-label">Total Spent</h3>
              <p class="metric-value" id="total-spent">RWF 0</p>
            </div>
            <div class="metric-card">
              <h3 class="metric-label">This Week</h3>
              <p class="metric-value" id="week-spent">RWF 0</p>
            </div>
            <div class="metric-card">
              <h3 class="metric-label">Transactions</h3>
              <p class="metric-value" id="total-count">0</p>
            </div>
            <div class="metric-card">
              <h3 class="metric-label">Average</h3>
              <p class="metric-value" id="average-spent">RWF 0</p>
            </div>
          </div>

          <!-- Budget Status with ARIA Live Region -->
          <div class="budget-status">
            <h3>Budget Status</h3>
            <div class="budget-info">
              <p>Monthly Budget: <span id="budget-cap">RWF 100,000</span></p>
              <div
                class="progress-bar"
                role="progressbar"
                aria-valuenow="0"
                aria-valuemin="0"
                aria-valuemax="100"
                aria-label="Budget usage"
              >
                <div class="progress-fill" id="budget-progress"></div>
              </div>
              <p
                class="budget-message"
                id="budget-message"
                role="status"
                aria-live="polite"
                aria-atomic="true"
              >
                <!-- Dynamic message here -->
              </p>
            </div>
          </div>

          <!-- 7-Day Trend Chart -->
          <div class="chart-container">
            <h3>7-Day Spending Trend</h3>
            <div
              class="chart"
              id="trend-chart"
              aria-label="Bar chart showing spending over the last 7 days"
            >
              <!-- Chart will be generated by JS -->
            </div>
          </div>

          <!-- Top Categories -->
          <div class="top-categories">
            <h3>Top Spending Categories</h3>
            <ul id="top-categories-list" class="categories-list">
              <!-- Dynamic list -->
            </ul>
          </div>
        </div>
      </section>

      <!-- TRANSACTIONS SECTION -->
      <section
        id="transactions"
        class="section"
        aria-labelledby="transactions-heading"
      >
        <div class="container">
          <h2 id="transactions-heading">All Transactions</h2>

          <!-- Search and Filter Controls -->
          <div class="controls">
            <div class="search-box">
              <label for="regex-search" class="sr-only"
                >Search transactions using regex</label
              >
              <input
                type="text"
                id="regex-search"
                class="search-input"
                placeholder="üîç Regex search (e.g., /coffee/i or \.\d{2}\b)"
                aria-describedby="search-help"
              />
              <div id="search-help" class="help-text">
                Try patterns like: <code>/coffee/i</code> (case-insensitive),
                <code>\.\d{2}\b</code> (cents present)
              </div>
              <div class="search-options">
                <label>
                  <input
                    type="checkbox"
                    id="case-sensitive"
                    aria-label="Case sensitive search"
                  />
                  Case sensitive
                </label>
              </div>
              <div
                id="search-error"
                class="error-message"
                role="alert"
                aria-live="assertive"
              ></div>
            </div>

            <div class="filter-sort">
              <button
                class="btn btn-secondary"
                id="sort-date"
                aria-label="Sort by date"
              >
                Sort by Date ‚¨áÔ∏è
              </button>
              <button
                class="btn btn-secondary"
                id="sort-description"
                aria-label="Sort by description"
              >
                Sort by Description A-Z
              </button>
              <button
                class="btn btn-secondary"
                id="sort-amount"
                aria-label="Sort by amount"
              >
                Sort by Amount ‚¨áÔ∏è
              </button>
            </div>

            <button class="btn btn-primary" id="add-transaction-btn">
              ‚ûï Add New Transaction
            </button>
          </div>

          <!-- Transactions List (Cards on mobile, Table on desktop) -->
          <div id="transactions-container">
            <!-- Mobile: Cards -->
            <div class="transactions-cards" id="transactions-cards">
              <!-- Dynamic cards -->
            </div>

            <!-- Desktop: Table -->
            <div class="transactions-table-wrapper">
              <table class="transactions-table" id="transactions-table">
                <thead>
                  <tr>
                    <th scope="col">Date</th>
                    <th scope="col">Description</th>
                    <th scope="col">Category</th>
                    <th scope="col">Amount</th>
                    <th scope="col">Payment</th>
                    <th scope="col">Actions</th>
                  </tr>
                </thead>
                <tbody id="transactions-tbody">
                  <!-- Dynamic rows -->
                </tbody>
              </table>
            </div>
          </div>

          <!-- Empty State -->
          <div id="empty-state" class="empty-state" hidden>
            <p>
              No transactions found. Add your first transaction to get started!
            </p>
          </div>
        </div>
      </section>

      <!-- ADD/EDIT TRANSACTION FORM SECTION -->
      <section
        id="transaction-form-section"
        class="section"
        aria-labelledby="form-heading"
        hidden
      >
        <div class="container">
          <h2 id="form-heading">Add Transaction</h2>

          <form id="transaction-form" class="form" novalidate>
            <div class="form-group">
              <label for="description">
                Description
                <span class="required" aria-label="required">*</span>
              </label>
              <input
                type="text"
                id="description"
                name="description"
                class="form-input"
                required
                aria-required="true"
                aria-describedby="description-error description-help"
                placeholder="e.g., Lunch at cafeteria"
              />
              <span class="help-text" id="description-help"
                >No leading/trailing spaces allowed</span
              >
              <span
                class="error-message"
                id="description-error"
                role="alert"
              ></span>
            </div>

            <div class="form-group">
              <label for="amount">
                Amount (RWF)
                <span class="required" aria-label="required">*</span>
              </label>
              <input
                type="text"
                id="amount"
                name="amount"
                class="form-input"
                required
                aria-required="true"
                aria-describedby="amount-error amount-help"
                placeholder="0.00"
              />
              <span class="help-text" id="amount-help"
                >Positive number with max 2 decimals</span
              >
              <span class="error-message" id="amount-error" role="alert"></span>
            </div>

            <div class="form-group">
              <label for="category">
                Category <span class="required" aria-label="required">*</span>
              </label>
              <select
                id="category"
                name="category"
                class="form-input"
                required
                aria-required="true"
                aria-describedby="category-error"
              >
                <option value="">-- Select Category --</option>
                <option value="Food">Food</option>
                <option value="Books">Books</option>
                <option value="Transport">Transport</option>
                <option value="Entertainment">Entertainment</option>
                <option value="Fees">Fees</option>
                <option value="Other">Other</option>
              </select>
              <span
                class="error-message"
                id="category-error"
                role="alert"
              ></span>
            </div>

            <div class="form-group">
              <label for="date">
                Date <span class="required" aria-label="required">*</span>
              </label>
              <input
                type="text"
                id="date"
                name="date"
                class="form-input"
                required
                aria-required="true"
                aria-describedby="date-error date-help"
                placeholder="YYYY-MM-DD"
              />
              <span class="help-text" id="date-help">Format: YYYY-MM-DD</span>
              <span class="error-message" id="date-error" role="alert"></span>
            </div>

            <div class="form-group">
              <label for="payment-method">Payment Method (Optional)</label>
              <select
                id="payment-method"
                name="paymentMethod"
                class="form-input"
              >
                <option value="">-- Select --</option>
                <option value="Cash">Cash</option>
                <option value="Mobile Money">Mobile Money</option>
                <option value="Card">Card</option>
              </select>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn btn-primary">
                üíæ Save Transaction
              </button>
              <button type="button" class="btn btn-secondary" id="cancel-form">
                ‚ùå Cancel
              </button>
            </div>

            <!-- Form-level status message -->
            <div
              id="form-status"
              class="form-status"
              role="status"
              aria-live="polite"
            ></div>
          </form>
        </div>
      </section>

      <!-- BALANCE SECTION -->
      <section id="balance" class="section" aria-labelledby="balance-heading">
        <div class="container">
          <h2 id="balance-heading">Current Balance</h2>

          <div class="balance-card">
            <h3>Available Balance</h3>
            <p class="balance-amount" id="balance-amount">RWF 0</p>
            <p class="balance-updated">
              Last updated: <span id="balance-updated">--</span>
            </p>
          </div>

          <!-- Breakdown by Category -->
          <div class="category-breakdown">
            <h3>Spending by Category</h3>
            <ul id="category-breakdown-list" class="breakdown-list">
              <!-- Dynamic list -->
            </ul>
          </div>

          <!-- Currency Conversion -->
          <div class="currency-conversion">
            <h3>Currency Conversion</h3>
            <p class="help-text">Your balance in other currencies:</p>
            <div class="conversion-grid">
              <div class="conversion-item">
                <span class="currency-label">USD</span>
                <span class="currency-value" id="balance-usd">$0.00</span>
              </div>
              <div class="conversion-item">
                <span class="currency-label">EUR</span>
                <span class="currency-value" id="balance-eur">‚Ç¨0.00</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- HISTORY SECTION -->
      <section id="history" class="section" aria-labelledby="history-heading">
        <div class="container">
          <h2 id="history-heading">Spending History</h2>

          <div class="time-filter">
            <button class="btn btn-secondary active" data-period="7">
              7 Days
            </button>
            <button class="btn btn-secondary" data-period="30">30 Days</button>
            <button class="btn btn-secondary" data-period="all">
              All Time
            </button>
          </div>

          <!-- History Chart -->
          <div class="chart-container">
            <h3>Spending Trend</h3>
            <div
              class="chart"
              id="history-chart"
              aria-label="Spending trend over selected period"
            >
              <!-- Chart generated by JS -->
            </div>
          </div>

          <!-- Monthly Comparison -->
          <div class="monthly-comparison">
            <h3>Monthly Comparison</h3>
            <ul id="monthly-comparison-list" class="comparison-list">
              <!-- Dynamic list -->
            </ul>
          </div>
        </div>
      </section>

      <!-- SETTINGS SECTION -->
      <section id="settings" class="section" aria-labelledby="settings-heading">
        <div class="container">
          <h2 id="settings-heading">Settings</h2>

          <form id="settings-form" class="form">
            <!-- Currency Settings -->
            <fieldset class="settings-group">
              <legend>Currency Settings</legend>

              <div class="form-group">
                <label for="base-currency">Base Currency</label>
                <select id="base-currency" class="form-input">
                  <option value="RWF">RWF (Rwandan Franc)</option>
                  <option value="USD">USD (US Dollar)</option>
                  <option value="EUR">EUR (Euro)</option>
                </select>
              </div>

              <div class="form-group">
                <label for="usd-rate">USD Exchange Rate (1 USD = ? RWF)</label>
                <input
                  type="number"
                  id="usd-rate"
                  class="form-input"
                  value="1200"
                  min="0"
                  step="0.01"
                />
              </div>

              <div class="form-group">
                <label for="eur-rate">EUR Exchange Rate (1 EUR = ? RWF)</label>
                <input
                  type="number"
                  id="eur-rate"
                  class="form-input"
                  value="1300"
                  min="0"
                  step="0.01"
                />
              </div>
            </fieldset>

            <!-- Budget Settings -->
            <fieldset class="settings-group">
              <legend>Budget Settings</legend>

              <div class="form-group">
                <label for="monthly-budget">Monthly Budget Cap (RWF)</label>
                <input
                  type="number"
                  id="monthly-budget"
                  class="form-input"
                  value="100000"
                  min="0"
                  step="1000"
                />
                <span class="help-text"
                  >Set to 0 to disable budget tracking</span
                >
              </div>
            </fieldset>

            <!-- Data Management -->
            <fieldset class="settings-group">
              <legend>Data Management</legend>

              <div class="data-actions">
                <button
                  type="button"
                  class="btn btn-secondary"
                  id="export-data"
                >
                  üì§ Export Data (JSON)
                </button>
                <label class="btn btn-secondary">
                  üì• Import Data (JSON)
                  <input type="file" id="import-data" accept=".json" hidden />
                </label>
                <button type="button" class="btn btn-danger" id="clear-data">
                  üóëÔ∏è Clear All Data
                </button>
              </div>
            </fieldset>

            <div class="form-actions">
              <button type="submit" class="btn btn-primary">
                üíæ Save Settings
              </button>
            </div>

            <div
              id="settings-status"
              class="form-status"
              role="status"
              aria-live="polite"
            ></div>
          </form>
        </div>
      </section>

      <!-- ABOUT SECTION -->
      <section id="about" class="section" aria-labelledby="about-heading">
        <div class="container">
          <h2 id="about-heading">About FinanceTracker</h2>

          <div class="about-hero">
            <h3>Smart Budgeting Made Simple</h3>
            <p>
              Track your expenses, manage budgets, and achieve your financial
              goals as a student.
            </p>
          </div>

          <div class="features-list">
            <h3>Features</h3>
            <ul>
              <li>‚úÖ Track unlimited transactions</li>
              <li>‚úÖ Multi-currency support (RWF, USD, EUR)</li>
              <li>‚úÖ Budget caps with real-time alerts</li>
              <li>‚úÖ Advanced regex search functionality</li>
              <li>‚úÖ Export/Import JSON data</li>
              <li>‚úÖ Responsive design (mobile, tablet, desktop)</li>
              <li>‚úÖ Full keyboard navigation support</li>
            </ul>
          </div>

          <div class="developer-info">
            <h3>Developer Information</h3>
            <p><strong>Created by:</strong> Your Name</p>
            <p>
              <strong>Email:</strong>
              <a href="mailto:your.email@example.com">your.email@example.com</a>
            </p>
            <p>
              <strong>GitHub:</strong>
              <a
                href="https://github.com/yourusername/finance-tracker"
                target="_blank"
                rel="noopener noreferrer"
                >View Repository</a
              >
            </p>
          </div>

          <div class="tech-stack">
            <h3>Technologies Used</h3>
            <ul class="tech-list">
              <li>HTML5</li>
              <li>CSS3 (Flexbox, Grid, Media Queries)</li>
              <li>JavaScript ES6+ (Modules)</li>
              <li>LocalStorage API</li>
              <li>Regular Expressions</li>
            </ul>
          </div>

          <div class="version-info">
            <p><strong>Version:</strong> 1.0.0</p>
            <p><strong>Last Updated:</strong> October 2025</p>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer role="contentinfo">
      <div class="container">
        <p>&copy; 2025 FinanceTracker. Built for students, by students.</p>
      </div>
    </footer>

    <!-- Scripts -->
    <script type="module" src="../scripts/app.js"></script>
  </body>
</html>
